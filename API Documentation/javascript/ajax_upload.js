!function($){$.fn.ajaxUpload=function(){this.live("submit",function(){var form=$(this),iframe=createIFrame();form.attr("target",iframe.name),form.attr("action",form.attr("action").replace(/(\.[^\.\/]+)?$/,".js"));var toDeleteFlag=!1;$(iframe).load(function(){if("about:blank"==iframe.src)return toDeleteFlag&&setTimeout($(iframe).remove,0),void 0;var doc=iframe.contentDocument?iframe.contentDocument:frames[iframe.id].document,response=doc.body.innerHTML;response=response.replace(/(^<[^>]+>)|(<\/[^>]+>$)/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),form.find("input[type=file]").val(""),eval(response),toDeleteFlag=!0,iframe.src="about:blank"})})};var createIFrame=function(){var e=getUID();return $("<iframe>").attr("src","javascript:false;").attr("name",e).attr("id",e).hide().appendTo($(document).find("body")).get(0)},getUID=function(){var e=0;return function(){return"ajax-upload-"+e++}}()}(jQuery);